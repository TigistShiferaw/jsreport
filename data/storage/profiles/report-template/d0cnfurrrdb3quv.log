{"type":"operationStart","subtype":"profile","data":{"_id":"gJwgC4YZKz0kMWnL","timestamp":"2025-02-27T14:22:24.855Z","state":"queued","mode":"standard","creationDate":"2025-02-27T14:22:24.862Z","modificationDate":"2025-02-27T14:22:24.862Z","shortid":"TOGOnPE","inheritedReadPermissions":[],"inheritedEditPermissions":[],"$entitySet":"profiles"},"doDiffs":false,"timestamp":1740666144858,"id":"fxju7nquhpdiku1","previousOperationId":null,"operationId":"wthie5u3ogtqu3n"}
{"type":"log","level":"info","message":"Render request 24 queued for execution and waiting for available worker","previousOperationId":"wthie5u3ogtqu3n","timestamp":1740666144859,"id":"5suh6nhcu4tcqqr"}
{"type":"operationStart","subtype":"render","name":"report-template","previousOperationId":"wthie5u3ogtqu3n","timestamp":1740666145018,"id":"mf3xearya2lt43l","previousEventId":"fxju7nquhpdiku1","operationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145024,"level":"info","message":"Starting rendering request 24 (user: tigist)","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"nnwcm3bjzpgyz84","previousOperationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145029,"level":"info","message":"Rendering template { name: report-template, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"szyc4yc40iuffl7","previousOperationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145038,"level":"debug","message":"Adding sample data B1Ns-r1M","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"4wo12t53h6kat1q","previousOperationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145115,"level":"debug","message":"Executing script tableContent (beforeRender)","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"mfuiaboet1hsi2t","previousOperationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145191,"level":"warn","message":"Error when processing render request 24\n(because) error when evaluating custom script /tableContent\nUnexpected token ';'\nsandbox.js:39\n;return {topLevelFunctions: {}, fnToExecute: ojvzhjopkh_executionFn_expose} })()\n^\n\nSyntaxError: Unexpected token ';'\n    at new Script (node:vm:99:7)\n    at doCompileScript (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:154:10)\n    at run (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:214:20)","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"xrm33r471e1bgyv","previousOperationId":"wawomkbywn5cfeb"}
{"type":"log","timestamp":1740666145192,"level":"warn","message":"Rendering request 24 finished with error in 338 ms","meta":{"rootId":"d0cnfurrrdb3quv","id":"d0cnfurrrdb3quv"},"id":"ompgn2i93hj96pv","previousOperationId":"wawomkbywn5cfeb"}
{"type":"error","timestamp":1740666145200,"statusCode":400,"weak":true,"entity":{"shortid":"YRlpUHQKfQ","name":"tableContent","content":"const jsreport = require('jsreport-proxy')\n\nfunction beforeRender(req, res) {    \n    req.options.pdfUtils = { removeHiddenMarks: false }\n}\n\nasync function afterRender (req, res) {\n    if (req.data.secondRender) {\n        return\n    }\n\n    // Log the original HTML\n    console.log('Original HTML:', res.content);\n\n    const p  = await jsreport.pdfUtils.parse(res.content, true)    \n\n    // Log the parsed HTML to see changes\n    console.log('Parsed HTML:', p);\n\n    const finalR = await jsreport.render({\n        template: {\n            name: req.template.name\n        },\n        data: {\n            ...req.data,\n            $pdf: p,\n            secondRender: true\n        }\n    })\n    \n    // Log the final content after rendering\n    console.log('Final Rendered HTML:', finalR.content);\n\n    res.content = finalR.content\n}\n\n}"},"property":"content","logged":true,"previousOperationId":"wawomkbywn5cfeb","id":"e5wd6rde9o2nd8o","stack":"sandbox.js:39\n;return {topLevelFunctions: {}, fnToExecute: ojvzhjopkh_executionFn_expose} })()\n^\n\nSyntaxError: Unexpected token ';'\n    at new Script (node:vm:99:7)\n    at doCompileScript (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:154:10)\n    at run (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (C:\\Users\\hp\\Desktop\\competitoor\\Dev\\Jsreport template\\jsreport\\node_modules\\@jsreport\\jsreport-core\\lib\\worker\\sandbox\\runInSandbox.js:214:20)","message":"Error when evaluating custom script /tableContent\nUnexpected token ';'"}
